---
typora-root-url: images
---

# 1、网络模型

网络模型即计算机相关产品需要准守的准则。也就是OSI七成模型架构

后期简化为TCP/IP四层架构(应用层、TCP传输层、IP层、数据链路层)

上面的两种模型中一直存在客户端与服务端的角色

## 1.1、客户端

客户端即发起请求者。发送数据者。例如在自己计算机中QQ应用、计算机中浏览器

## 1.2、服务端

服务端即接受请求者。根据客户端所发送的数据对数据进行处理。例如提供一个Apache的web服务

注意：客户端与服务端角色可能在一台计算机上

## 1.3、客户端与服务端通信过程

![1571723252681](/1571723252681.png)

其中在发送数据的过程中数据按照什么样的格式发送。此时就需要规定格式。格式种类较多在web上主流的为http

协议

在发送数据的过程中可以使用UDP/TCP协议传输数据

UDP/tcp限制数据如何发送

HTTP协议限制数据的格式

# 2、网页访问原理

## 2.1、单个请求的原理

例如直接输入地址访问一个图片

1、客户端输入地址

2、经历本地的DNS解析获取服务端的IP地址。

3、如果本地的DNS无法得到IP地址在互联网中进行解析得到IP地址。

4、使用TCP/IP协议客户端与服务端建立连接(三次握手)

5、客户端将数据安装规定的格式发送给服务端

6、服务端接受到请求数据。根据相关的信息找到对应的文件进行解析最终得到结果

7、将结果发送到客户端。

8、客户端对结果进行显示

9、断开了连接(四次挥手)

## 2.2、访问网页的原理

1、客户端请求一个网页地址

2、服务度收到请求响应html代码

3、客户端收到响应的代码渲染结果。在渲染的过程中涉及到资源文件会依次发送请求得到相关的文件

4、最终将所有的请求发送完毕得到结果展示用户

根据网页访问原理。需要资源都加载完毕最终才可以看到完整的结果。因此可以使用延迟加载技术提升用户的访问

速度

# 3、http协议概述

## 3.1、http协议介绍

超文本传送协议(用于规定数据传输的格式)Hyper Text Transfer Protocol 超文本传送协议 (HTTP) 是一种通信协

议，它允许将超文本标记语言 (HTML) 文档从 Web 服务器传送到 Web 浏览器。

http协议隶属于TCP/IP协议簇下的一种应用层协议。HTTP协议本身无状态

## 3.2、抓包

抓包即得到请求与响应的格式信息

### 3.2.1、使用浏览器自带的实现

1、打开工具切换到network下

![1571725251469](/1571725251469.png)

2、点击请求查看详情

![1571725374116](/1571725374116.png)

使用浏览器自带的工具所查看到的数据格式时进过合并处理之后的结果

### 3.2.2、使用第三方的工具查看

1、软件的布局说明

![1571725676341](/1571725676341.png)

2、查看指定的请求

![1571725809805](/1571725809805.png)

# 4、http请求

## 4.1、请求数据的格式

1、请求行

2、请求头

3、空白行

4、请求体

## 4.2、查看标注http请求

1)创建表单

```php
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<form method="post" action="demo1.php">
		<input type="text" name="name">
		<input type="text" name="name2">
		<input type="submit" name="" value="submit">
	</form>
</body>
</html>
```

2、提交数据后抓包

![1571726192459](/1571726192459.png)

## 4.3、请求行

```php
POST http://demo.com/demo1.php HTTP/1.1
```

POST：表示请求资源采用的数据提交的方式为POST请求

http://demo.com/demo1.php：表示请求哪一个资源地址

HTTP/1.1 ：表示使用的协议以及版本号

## 4.4、请求方式

在http协议中规定请求资源文件时请求方式有八种比较常用的四种。任何项目永远是数据的curd(增删改查)操作

GET：查询数据

POST：提交数据添加

PUT：提交数据修改

DELETE：提交数据删除

## 4.5、请求头

请求头的作用是直接明确通知服务端相关的一些信息。请求头每一行一个头信息。每一行使用冒号进行分割左侧为

头信息的名称，右侧为值

| 头名称          | 含义                                                         |
| --------------- | ------------------------------------------------------------ |
| Host            | 表示请求的域名                                               |
| Connection      | 是否长链接                                                   |
| Content-Length  | 指定请求体的长度                                             |
| User-Agent      | 客户端的信息                                                 |
| Accept          | 通知服务端可以接受的数据格式                                 |
| Referer         | 通知服务端请求的来源（上一次请求）该值可以实现防盗链功能     |
| Accept-Encoding | 通知服务端客户端可以支持的压缩类型                           |
| Content-Type    | 通知服务端客户端请求体中数据格式 比较常用的有application/x-www-form-urlencoded(from表单默认的方式)、text/plan(普通文本)、multipart/form-data(文件上传) |

## 4.6、空白行

空白行没有内容 目的在于分隔请求体与请求头

## 4.7、请求体

请求过程中发送的数据，注意get方式的请求数据在地址上

# 5、http响应

## 5.1、响应数据的格式

1、响应行

2、响应头

3、空白行

4、响应体

![1571728720977](/1571728720977.png)

## 5.2、响应行

```php
HTTP/1.1 404 Not Found
```

HTTP/1.1：使用额http协议及版本号

404：表示响应的状态码 在http协议中每一个状态已经被固定。200表示请求正常、302代表重定向、404未找到

文件、500：服务器内部错误

Not Found：响应状态码描述

## 5.3、响应头

与请求头的格式一致 一行代表一个头信息。响应头信息目的是服务端通知客户端

| 响应头名称     | 含义                              |
| -------------- | --------------------------------- |
| Server         | 描述服务端使用的是哪一款web服务器 |
| Connection     | 是否保持长链接                    |
| Date           | 时间                              |
| Last-Modified  | 请求的资源最后的修改时间          |
| content-type   | 服务端通知客户端响应的数据格式    |
| Content-Length | 响应体的长度                      |

## 5.4、空白行

用于对响应头与响应体进行分割

## 5.5、响应体

服务端所发送给客户端的数据

# 6、cookie的相关的头信息

1、客户端发送请求某一个资源地址

2、服务端进行响应在头信息中增加set-cookie传输客户端需要记录的数据

3、客户端接收响应根据set-cookie头信息将cookie的内容保存到本地

4、当下次用户再次发送请求时在头信息中携带cookie头信息对应的值为所保存的数据

# 7、浏览器缓存的头信息

1、客户端请求某一个资源地址

2、服务端响应请求的数据。在响应过程中在头信息中包含一个Last-Modified记录服务端上对应这个文件最后的修

改时间

3、浏览器接受响应的数据，在没有禁用浏览器的缓存情况下。浏览器会将资源信息保存到本地文件并且也会记录

文件的最后修改时间

4、当下次请求该资源时客户端再请求头中增加If-Modified-Since头信息标注自己所记录的文件最后修改时间(If-

None-Match为一个资源的标识)

5、服务端再次接受请求。提取客户端所发送的最后修改时间与服务器上文件的最后修改时间进行对比。如果相等

说明请求的文件没有被修改过。因此响应304给客户端。

6、客户端直接使用本地的文件展示结果



